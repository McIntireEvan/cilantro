{"version":3,"sources":["pages/RecipeView.tsx","pages/CookbookView.tsx","Settings.ts","pages/SettingsView.tsx","pages/SearchView.tsx","components/Sidebar.tsx","pages/TagsView.tsx","App.tsx","index.tsx"],"names":["Tag","props","url","text","to","RecipeWrapper","id","useParams","x","Number","RecipeView","recipes","tagHTML","tags","map","tag","i","className","length","ingredients","amount","item","steps","s","imgURL","process","imgUrl","title","serves","time","sourceURL","href","sourceAuthor","bodyText","src","alt","RecipeJSONLD","recipe","data","cookTime","description","image","recipeIngredient","name","recipeInstructions","join","recipeYield","type","JSON","stringify","CookbookView","tiles","r","style","backgroundImage","body","SettingsContext","React","createContext","dataRootURL","indexFile","theme","sidebarCompact","SettingsView","settings","useContext","useState","selectedTheme","setSelectedTheme","compactSidebar","setCompactSidebar","useEffect","onUpdate","updateCompact","value","checked","onChange","options","includeScore","keys","weight","SearchView","searchText","setSearchText","filteredRecipes","setFilteredRecipes","rec","Fuse","search","cookbook","evt","target","Sidebar","emoji","getEmoji","c","classNames","t","hidden","TagCloudView","index","push","tLinks","TagPageWrapper","tagbookData","parseChowdownMd","parsed","matter","console","log","split","trim","directions","yield","content","App","setCookbook","tagIndex","setTagIndex","setSettings","a","fetch","resp","recipeResp","recipeData","Promise","all","then","rs","book","load","mapping","makeTagGroups","undefined","Provider","path","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.87df65fc.chunk.js","sourcesContent":["import React from \"react\";\nimport { Link, useParams } from \"react-router-dom\";\nimport { Ingredient, Recipe } from \"../models\";\nimport \"../App.css\";\n\nfunction Tag(props: { text: string }) {\n  const url = \"/tags/\" + props.text;\n  return <Link to={url}>{props.text}</Link>;\n}\n\nexport function RecipeWrapper(props: { recipes: Recipe[] }) {\n  const { id } = useParams<{ id: string }>();\n  const x = Number(id);\n  return <RecipeView {...props.recipes[x]} />;\n}\n\nexport default function RecipeView(props: Recipe) {\n  const tagHTML = props.tags.map((tag, i) => {\n    return (\n      <span className=\"recipe-tag\" key={i}>\n        <Tag text={tag} />\n        {i + 1 !== props.tags.length ? \",\" : \"\"}{\" \"}\n      </span>\n    );\n  });\n\n  const ingredients = props.ingredients.map((i: Ingredient) => {\n    // TODO: Add hrecipe unit stuff\n    return (\n      <li className=\"ingredient p-ingredient\">\n        {i.amount !== \"\" && <span className=\"ingredient-amount\">{i.amount}</span>}\n        <span className=\"ingredient-item\">{i.item}</span>\n      </li>\n    );\n  });\n\n  const steps = props.steps.map((s) => {\n    return (\n      <li className=\"prep-step\">\n        <p className=\"prep-step-text\">{s}</p>\n      </li>\n    );\n  });\n\n  const imgURL = process.env.PUBLIC_URL + \"/recipes/images/\" + props.imgUrl;\n\n  return (\n    <article className=\"recipe hRecipe h-recipe\">\n      <h1 className=\"recipe-title fn p-name\">{props.title}</h1>\n      <header className=\"recipe-meta\">\n        {props.serves && (\n          <span className=\"recipe-serves yield\">\n            <b>Yield</b> {props.serves}\n          </span>\n        )}\n        {props.time && (\n          <span className=\"recipe-time\">\n            <b>Time</b> {props.time}\n          </span>\n        )}\n        {props.sourceURL && (\n          <span>\n            <b>Source</b>{\" \"}\n            <a href={props.sourceURL} className=\"recipe-source\">\n              Link\n            </a>\n          </span>\n        )}\n        {props.sourceAuthor && (\n          <span className=\"recipe-author\">\n            <b>By</b> {props.sourceAuthor}{\" \"}\n          </span>\n        )}\n      </header>\n      <div className=\"recipe-info\">\n        <p className=\"recipe-description p-summary summary\">{props.bodyText}</p>\n        <img\n          className=\"recipe-picture u-photo photo\"\n          src={imgURL}\n          alt={props.title}\n        />\n      </div>\n      <div className=\"recipe-tags\">{tagHTML}</div>\n      <div className=\"recipe-body\">\n        <div className=\"recipe-ingredients\">\n          <h2>Ingredients</h2>\n          <ul className=\"ingredients-list\">{ingredients}</ul>\n        </div>\n        <div className=\"recipe-steps\">\n          <h2>Preparation</h2>\n          <ol className=\"prep-steps instructions e-instructions\">{steps}</ol>\n        </div>\n      </div>\n      <RecipeJSONLD recipe={props} />\n    </article>\n  );\n}\n\n// TODO: expand this\nfunction RecipeJSONLD(props: { recipe: Recipe }) {\n  const data = {\n    \"@context\": \"https://schema.org\",\n    \"@type\": \"Recipe\",\n    cookTime: props.recipe.time,\n    description: props.recipe.bodyText,\n    image: props.recipe.imgUrl,\n    recipeIngredient: props.recipe.ingredients,\n    name: props.recipe.title,\n    recipeInstructions: props.recipe.steps.join(\". \"),\n    recipeYield: props.recipe.serves,\n  };\n  return <script type=\"application/ld+json\">{JSON.stringify(data)}</script>;\n}\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { CookbookData } from \"../models\";\n\nimport \"../App.css\";\n\nexport default function CookbookView(props: CookbookData) {\n  const tiles = props.recipes.map((r) => {\n    const href = \"/r/\" + r.id;\n    const imgURL = process.env.PUBLIC_URL + \"/recipes/images/\" + r.imgUrl;\n    return (\n      <div className=\"collection-tile-wrapper\">\n        <Link className=\"collection-tile-text\" to={href}>\n          {r.title}\n        </Link>\n        <div\n          className=\"collection-tile\"\n          style={{\n            backgroundImage: `url(${imgURL})`,\n          }}\n        ></div>\n      </div>\n    );\n  });\n\n  return (\n    <div className=\"collection-holder\">\n      <h1 className=\"collection-title\">{props.title}</h1>\n      <pre className=\"collection-description\">{props.body}</pre>\n      <div className=\"collection\">{tiles}</div>\n    </div>\n  );\n}\n","import React from \"react\";\n\nexport interface AppSettings {\n  dataRootURL: string;\n  indexFile: string;\n  theme: string;\n  sidebarCompact: boolean;\n}\n\nexport const SettingsContext = React.createContext<AppSettings>({\n  // TODO: update\n  dataRootURL: \"http://localhost:3000/recipes/\",\n  indexFile: \"README.md\",\n  theme: \"light\",\n  sidebarCompact: false,\n});\n\nexport function getEmoji(settings: AppSettings): string {\n  let emoji;\n  switch (settings.theme) {\n    case \"red\": {\n      emoji = \"🍎\";\n      break;\n    }\n    case \"blue\": {\n      emoji = \"🫐\";\n      break;\n    }\n    case \"green\": {\n      emoji = \"🍈\";\n      break;\n    }\n    case \"dark\": {\n      emoji = \"🍇\";\n      break;\n    }\n    default: {\n      emoji = \"🌿\";\n    }\n  }\n\n  return emoji;\n}\n","import React, { useContext, useEffect, useState } from \"react\";\nimport { SettingsContext } from \"../Settings\";\n\nexport default function SettingsView(props: {\n  onUpdate: (theme: string) => void;\n  updateCompact: (sidebarCompact: boolean) => void;\n}) {\n  const settings = useContext(SettingsContext);\n  const [selectedTheme, setSelectedTheme] = useState(settings.theme);\n  const [compactSidebar, setCompactSidebar] = useState(settings.sidebarCompact);\n\n  useEffect(() => {\n    if (settings.theme !== selectedTheme) {\n      props.onUpdate(selectedTheme);\n    }\n  }, [selectedTheme, props, settings]);\n\n  useEffect(() => {\n    if (settings.sidebarCompact !== compactSidebar) {\n      props.updateCompact(compactSidebar);\n    }\n  }, [compactSidebar, props, settings]);\n\n  return (\n    <div>\n      <h1>Settings</h1>\n      <h2>Theme</h2>\n      <form>\n        <div className=\"theme-radio\">\n          <label>\n            <input\n              type=\"radio\"\n              name=\"theme\"\n              value=\"light\"\n              checked={selectedTheme === \"light\"}\n              onChange={() => setSelectedTheme(\"light\")}\n              className=\"theme-radio-input\"\n            />\n            Light\n          </label>\n        </div>\n        <div className=\"theme-radio\">\n          <label>\n            <input\n              type=\"radio\"\n              name=\"theme\"\n              value=\"blue\"\n              checked={selectedTheme === \"blue\"}\n              onChange={() => setSelectedTheme(\"blue\")}\n              className=\"theme-radio-input\"\n            />\n            Blue\n          </label>\n        </div>\n        <div className=\"theme-radio\">\n          <label>\n            <input\n              type=\"radio\"\n              name=\"theme\"\n              value=\"green\"\n              checked={selectedTheme === \"green\"}\n              onChange={() => setSelectedTheme(\"green\")}\n              className=\"theme-radio-input\"\n            />\n            Green\n          </label>\n        </div>\n        <div className=\"theme-radio\">\n          <label>\n            <input\n              type=\"radio\"\n              name=\"theme\"\n              value=\"red\"\n              checked={selectedTheme === \"red\"}\n              onChange={() => setSelectedTheme(\"red\")}\n              className=\"theme-radio-input\"\n            />\n            Red\n          </label>\n        </div>\n        <div className=\"theme-radio\">\n          <label>\n            <input\n              type=\"radio\"\n              name=\"theme\"\n              value=\"dark\"\n              checked={selectedTheme === \"dark\"}\n              onChange={() => setSelectedTheme(\"dark\")}\n              className=\"theme-radio-input\"\n            />\n            Dark\n          </label>\n        </div>\n      </form>\n      <h2>Compact Sidebar</h2>\n      <label>\n        <input\n          type=\"checkbox\"\n          checked={compactSidebar}\n          onChange={() => setCompactSidebar(!compactSidebar)}\n        />{\" \"}\n        Compact sidebar\n      </label>\n    </div>\n  );\n}\n","import React, { useEffect, useState } from \"react\";\nimport Fuse from \"fuse.js\";\nimport { Recipe } from \"../models\";\nimport CookbookView from \"./CookbookView\";\n\nconst options = {\n  includeScore: true,\n  keys: [\n    {\n      name: \"title\",\n      weight: 0.25,\n    },\n    {\n      name: \"tags\",\n      weight: 0.35,\n    },\n    {\n      name: \"ingredients\",\n      weight: 0.35,\n    },\n    {\n      name: \"steps\",\n      weight: 0.05,\n    },\n  ],\n};\n\nexport function SearchView(props: { recipes: Recipe[] }) {\n  const [searchText, setSearchText] = useState(\"\");\n  const [filteredRecipes, setFilteredRecipes] = useState(props.recipes);\n\n  useEffect(() => {\n    const fuse = new Fuse(props.recipes, options);\n    const res = fuse.search(searchText);\n\n    // hopefully the lib already sorts by score lol\n    const rec = res.map((r) => r.item);\n    setFilteredRecipes(rec);\n  }, [props, searchText]);\n\n  const cookbook = {\n    title: \"Results\",\n    body: \"\",\n    recipes: filteredRecipes,\n  };\n\n  return (\n    <div>\n      <h1>Search</h1>\n      <input\n        type=\"text\"\n        value={searchText}\n        onChange={(evt) => setSearchText(evt.target.value)}\n      />\n      <CookbookView {...cookbook} />\n    </div>\n  );\n}\n","import { AppSettings, getEmoji, SettingsContext } from \"../Settings\";\nimport React, { useContext } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { Home, Search, Settings, Tag } from \"react-feather\";\nimport classNames from \"classnames\";\n\nexport default function Sidebar() {\n  const settings = useContext<AppSettings>(SettingsContext);\n  const emoji = getEmoji(settings);\n\n  const c = classNames({\n    \"app-sidebar\": !settings.sidebarCompact,\n    \"app-sidebar-c\": settings.sidebarCompact,\n  });\n\n  const t = classNames({\n    hidden: settings.sidebarCompact,\n  });\n\n  return (\n    <nav className={c}>\n      <section className=\"app-sidebar-body\">\n        <Link className=\"app-sidebar-link\" to=\"/\">\n          <Home /> <span className={t}>Home</span>\n        </Link>\n        <Link className=\"app-sidebar-link\" to=\"/tags\">\n          <Tag /> <span className={t}>Tags</span>\n        </Link>\n        <Link className=\"app-sidebar-link\" to=\"/search\">\n          <Search /> <span className={t}>Search</span>\n        </Link>\n        <Link className=\"app-sidebar-link\" to=\"/settings/\">\n          <Settings /> <span className={t}>Settings</span>\n        </Link>\n      </section>\n      <footer\n        className={classNames(\"app-sidebar-footer\", {\n          hidden: settings.sidebarCompact,\n        })}\n      >\n        <i>Cilantro v0</i> &middot; Made with {emoji}\n      </footer>\n    </nav>\n  );\n}\n","import React from \"react\";\nimport { Link, useParams } from \"react-router-dom\";\nimport { Recipe } from \"../models\";\nimport CookbookView from \"./CookbookView\";\n\nexport function TagCloudView(props: { index: { [tag: string]: Recipe[] } }) {\n  const tags = [];\n  for (const t in props.index) {\n    tags.push(t);\n  }\n\n  const tLinks = tags.map((t, i) => {\n    const url = \"/tags/\" + t;\n    return (\n      <span className=\"recipe-tags\" key={i}>\n        <Link to={url}>{t}</Link>\n        {i + 1 !== tags.length ? \",\" : \"\"}\n      </span>\n    );\n  });\n\n  return (\n    <div>\n      <h1>Tags</h1>\n      {tLinks}\n    </div>\n  );\n}\n\nexport function TagPageWrapper(props: { index: { [tag: string]: Recipe[] } }) {\n  const { tag } = useParams<{ tag: string }>();\n  const tagbookData = {\n    title: \"Tag: \" + tag,\n    body: \"\",\n    recipes: props.index[tag],\n  };\n  return <CookbookView {...tagbookData} />;\n}\n","import React, { useEffect, useState } from \"react\";\n\nimport matter from \"gray-matter\";\n\nimport \"./App.css\";\nimport { RecipeWrapper } from \"./pages/RecipeView\";\nimport CookbookView from \"./pages/CookbookView\";\n\nimport { Switch, Route, HashRouter } from \"react-router-dom\";\nimport { CookbookData, Recipe } from \"./models\";\nimport SettingsView from \"./pages/SettingsView\";\nimport { SearchView } from \"./pages/SearchView\";\nimport { AppSettings, SettingsContext } from \"./Settings\";\nimport Sidebar from \"./components/Sidebar\";\nimport { TagCloudView, TagPageWrapper } from \"./pages/TagsView\";\n\nfunction parseChowdownMd(id: number, data: string): Recipe {\n  const parsed = matter(data);\n  console.log(parsed);\n\n  const title = parsed.data.title;\n  const tags = parsed.data.tags.split(\",\").map((t: string) => t.trim());\n  const imgUrl = parsed.data.image;\n  const steps = parsed.data.directions;\n  const ingredients = parsed.data.ingredients.map((s: string) => {\n    // want to look for \"N\" or \"N/M\" or \"N and M\" or \"N or M\"\n    return { amount: \"\", item: s };\n  });\n  const serves = parsed.data.yield;\n  const time = parsed.data.time;\n  const sourceURL = parsed.data.sourceURL;\n  const sourceAuthor = parsed.data.sourceAuthor;\n\n  return {\n    id,\n    title,\n    tags,\n    imgUrl,\n    steps,\n    serves,\n    sourceURL,\n    sourceAuthor,\n    time,\n    ingredients,\n    bodyText: parsed.content,\n  };\n}\n\nfunction makeTagGroups(recipes: Recipe[]): { [tag: string]: Recipe[] } {\n  const mapping: { [tag: string]: Recipe[] } = {};\n  for (const r of recipes) {\n    for (const t of r.tags) {\n      if (!(t in mapping)) {\n        mapping[t] = [];\n      }\n      mapping[t].push(r);\n    }\n  }\n\n  return mapping;\n}\n\nexport default function App() {\n  const [cookbook, setCookbook] = useState<CookbookData>();\n  const [tagIndex, setTagIndex] = useState<{ [tag: string]: Recipe[] }>({});\n  const [settings, setSettings] = useState<AppSettings>({\n    dataRootURL: process.env.PUBLIC_URL + \"/recipes/\",\n    indexFile: \"README.md?raw=true\",\n    theme: \"light\",\n    sidebarCompact: true,\n  });\n\n  // TODO: This is really bad, but it works.\n  // Fix this when I better understand async again. I wish it was as easy as go.\n  useEffect(() => {\n    async function load() {\n      const resp = await fetch(settings.dataRootURL + settings.indexFile);\n      const data = await resp.text();\n\n      const parsed = matter(data);\n\n      const recipes = parsed.data.recipes.map(\n        async (name: string, i: number) => {\n          const recipeResp = await fetch(\n            settings.dataRootURL + \"recipes/\" + name + \".md?raw=true\"\n          );\n          const recipeData = await recipeResp.text();\n          return parseChowdownMd(i, recipeData);\n        }\n      );\n\n      Promise.all(recipes).then((rs: any) => {\n        const book = {\n          title: parsed.data.title,\n          body: parsed.content,\n          recipes: rs,\n        };\n        setCookbook(book);\n      });\n    }\n\n    load();\n  }, [settings]);\n\n  useEffect(() => {\n    if (cookbook) {\n      const i = makeTagGroups(cookbook.recipes);\n      setTagIndex(i);\n    }\n  }, [cookbook]);\n\n  if (settings.dataRootURL === \"\") {\n    return <div />;\n  } else if (settings.indexFile === \"\") {\n    return <div />;\n  }\n\n  if (cookbook === undefined) {\n    return <div>Loading...</div>;\n  }\n\n  function updateTheme(theme: string) {\n    console.log(theme);\n    setSettings({ ...settings, theme });\n  }\n\n  function updateCompact(sidebarCompact: boolean) {\n    setSettings({ ...settings, sidebarCompact });\n  }\n\n  return (\n    <SettingsContext.Provider value={settings}>\n      <HashRouter>\n        <div className={\"app app-theme-\" + settings.theme}>\n          <Sidebar />\n          <main className=\"app-content\">\n            <Switch>\n              <Route path=\"/r/:id\">\n                <RecipeWrapper recipes={cookbook.recipes} />\n              </Route>\n              <Route path=\"/tags/:tag\">\n                <TagPageWrapper index={tagIndex} />\n              </Route>\n              <Route path=\"/tags/\">\n                <TagCloudView index={tagIndex} />\n              </Route>\n              <Route path=\"/search/\">\n                <SearchView recipes={cookbook.recipes} />\n              </Route>\n              <Route path=\"/settings/\">\n                <SettingsView\n                  onUpdate={updateTheme}\n                  updateCompact={updateCompact}\n                />\n              </Route>\n              <Route path=\"/\">\n                <CookbookView {...cookbook} />\n              </Route>\n            </Switch>\n          </main>\n        </div>\n      </HashRouter>\n    </SettingsContext.Provider>\n  );\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./App.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}