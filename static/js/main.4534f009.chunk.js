(this.webpackJsonpcilantro=this.webpackJsonpcilantro||[]).push([[0],{21:function(e,t,c){},52:function(e,t){},89:function(e,t,c){"use strict";c.r(t);var a=c(0),s=c(1),n=c.n(s),i=c(43),r=c.n(i),j=(c(21),c(4)),l=c(20),d=c.n(l),o=c(30),b=c(11),p=c(31),h=c(32),u=c.n(h),m=c(7),O=c(3);function x(e){var t="/tags/"+e.text;return Object(a.jsx)(m.b,{to:t,children:e.text})}function f(e){var t=Object(O.f)().id,c=Number(t);return Object(a.jsx)(v,Object(j.a)({},e.recipes[c]))}function v(e){var t=e.tags.map((function(t,c){return Object(a.jsxs)("span",{children:[Object(a.jsx)(x,{text:t}),c+1!==e.tags.length?",":""," "]},c)})),c=e.ingredients.map((function(e){return Object(a.jsxs)("li",{className:"ingredient p-ingredient",children:[Object(a.jsx)("span",{className:"ingredient-amount",children:e.amount}),Object(a.jsx)("span",{className:"ingredient-item",children:e.item})]})})),s=e.steps.map((function(e){return Object(a.jsx)("li",{className:"prep-step",children:Object(a.jsx)("p",{className:"prep-step-text",children:e})})}));return Object(a.jsxs)("article",{className:"recipe hRecipe h-recipe",children:[Object(a.jsx)("h1",{className:"recipe-title fn p-name",children:e.title}),Object(a.jsxs)("header",{className:"recipe-meta",children:[e.serves&&Object(a.jsxs)("span",{className:"recipe-serves yield",children:["Yield ",e.serves]}),e.time&&Object(a.jsxs)("span",{className:"recipe-time",children:["Time ",e.time]}),e.sourceURL&&Object(a.jsx)("a",{href:e.sourceURL,className:"recipe-source",children:"Source"})]}),Object(a.jsxs)("div",{className:"recipe-info",children:[Object(a.jsx)("p",{className:"recipe-description p-summary summary",children:e.bodyText}),Object(a.jsx)("img",{className:"recipe-picture u-photo photo",src:e.imgUrl,alt:e.title})]}),Object(a.jsx)("div",{className:"recipe-tags",children:t}),Object(a.jsxs)("div",{className:"recipe-body",children:[Object(a.jsxs)("div",{className:"recipe-ingredients",children:[Object(a.jsx)("h2",{children:"Ingredients"}),Object(a.jsx)("ul",{className:"ingredients-list",children:c})]}),Object(a.jsxs)("div",{className:"recipe-steps",children:[Object(a.jsx)("h2",{children:"Preparation"}),Object(a.jsx)("ol",{className:"prep-steps instructions e-instructions",children:s})]})]}),Object(a.jsx)(g,{recipe:e})]})}function g(e){var t={"@context":"https://schema.org","@type":"Recipe",cookTime:e.recipe.time,description:e.recipe.bodyText,image:e.recipe.imgUrl,recipeIngredient:e.recipe.ingredients,name:e.recipe.title,recipeInstructions:e.recipe.steps.join(". "),recipeYield:e.recipe.serves};return Object(a.jsx)("script",{type:"application/ld+json",children:JSON.stringify(t)})}function N(e){var t=e.recipes.map((function(e){var t="/r/"+e.id;return Object(a.jsx)("div",{className:"collection-tile",children:Object(a.jsx)(m.b,{to:t,children:e.title})})}));return Object(a.jsxs)("div",{className:"collection-holder",children:[Object(a.jsx)("h1",{className:"collection-title",children:e.title}),Object(a.jsx)("pre",{className:"collection-description",children:e.body}),Object(a.jsx)("div",{className:"collection",children:t})]})}var y=n.a.createContext({dataRootURL:"http://localhost:3000/recipes/",indexFile:"README.md",theme:"light",sidebarCompact:!1});function k(e){var t=Object(s.useContext)(y),c=Object(s.useState)(t.theme),n=Object(b.a)(c,2),i=n[0],r=n[1],j=Object(s.useState)(t.sidebarCompact),l=Object(b.a)(j,2),d=l[0],o=l[1];return Object(s.useEffect)((function(){t.theme!==i&&e.onUpdate(i)}),[i,e,t]),Object(s.useEffect)((function(){t.sidebarCompact!==d&&e.updateCompact(d)}),[d,e,t]),Object(a.jsxs)("div",{children:[Object(a.jsx)("h1",{children:"Settings"}),Object(a.jsx)("h2",{children:"Theme"}),Object(a.jsxs)("form",{children:[Object(a.jsx)("div",{className:"theme-radio",children:Object(a.jsxs)("label",{children:[Object(a.jsx)("input",{type:"radio",name:"theme",value:"light",checked:"light"===i,onChange:function(){return r("light")},className:"theme-radio-input"}),"Light"]})}),Object(a.jsx)("div",{className:"theme-radio",children:Object(a.jsxs)("label",{children:[Object(a.jsx)("input",{type:"radio",name:"theme",value:"blue",checked:"blue"===i,onChange:function(){return r("blue")},className:"theme-radio-input"}),"Blue"]})}),Object(a.jsx)("div",{className:"theme-radio",children:Object(a.jsxs)("label",{children:[Object(a.jsx)("input",{type:"radio",name:"theme",value:"green",checked:"green"===i,onChange:function(){return r("green")},className:"theme-radio-input"}),"Green"]})}),Object(a.jsx)("div",{className:"theme-radio",children:Object(a.jsxs)("label",{children:[Object(a.jsx)("input",{type:"radio",name:"theme",value:"red",checked:"red"===i,onChange:function(){return r("red")},className:"theme-radio-input"}),"Red"]})}),Object(a.jsx)("div",{className:"theme-radio",children:Object(a.jsxs)("label",{children:[Object(a.jsx)("input",{type:"radio",name:"theme",value:"dark",checked:"dark"===i,onChange:function(){return r("dark")},className:"theme-radio-input"}),"Dark"]})})]}),Object(a.jsx)("h2",{children:"Compact Sidebar"}),Object(a.jsxs)("label",{children:[Object(a.jsx)("input",{type:"checkbox",checked:d,onChange:function(){return o(!d)}})," Compact sidebar"]})]})}var C=c(45),R={includeScore:!0,keys:[{name:"title",weight:.25},{name:"tags",weight:.35},{name:"ingredients",weight:.35},{name:"steps",weight:.05}]};function S(e){var t=Object(s.useState)(""),c=Object(b.a)(t,2),n=c[0],i=c[1],r=Object(s.useState)(e.recipes),l=Object(b.a)(r,2),d=l[0],o=l[1];Object(s.useEffect)((function(){var t=new C.a(e.recipes,R).search(n).map((function(e){return e.item}));o(t)}),[e,n]);var p={title:"Result",body:"",recipes:d};return Object(a.jsxs)("div",{children:[Object(a.jsx)("h1",{children:"Search"}),Object(a.jsx)("input",{type:"text",value:n,onChange:function(e){return i(e.target.value)}}),Object(a.jsx)(N,Object(j.a)({},p))]})}var w=c(91),U=c(92),E=c(93),L=c(94),T=c(25),F=c.n(T);function I(){var e=Object(s.useContext)(y),t=function(e){var t;switch(e.theme){case"red":t="\ud83c\udf4e";break;case"blue":t="\ud83e\uded0";break;case"green":t="\ud83c\udf48";break;case"dark":t="\ud83c\udf47";break;default:t="\ud83c\udf3f"}return t}(e),c=F()({"app-sidebar":!e.sidebarCompact,"app-sidebar-c":e.sidebarCompact}),n=F()({hidden:e.sidebarCompact});return Object(a.jsxs)("nav",{className:c,children:[Object(a.jsxs)("section",{className:"app-sidebar-body",children:[Object(a.jsxs)(m.b,{className:"app-sidebar-link",to:"/",children:[Object(a.jsx)(w.a,{})," ",Object(a.jsx)("span",{className:n,children:"Home"})]}),Object(a.jsxs)(m.b,{className:"app-sidebar-link",to:"/tags",children:[Object(a.jsx)(U.a,{})," ",Object(a.jsx)("span",{className:n,children:"Tags"})]}),Object(a.jsxs)(m.b,{className:"app-sidebar-link",to:"/search",children:[Object(a.jsx)(E.a,{})," ",Object(a.jsx)("span",{className:n,children:"Search"})]}),Object(a.jsxs)(m.b,{className:"app-sidebar-link",to:"/settings/",children:[Object(a.jsx)(L.a,{})," ",Object(a.jsx)("span",{className:n,children:"Settings"})]})]}),Object(a.jsxs)("footer",{className:F()("app-sidebar-footer",{hidden:e.sidebarCompact}),children:[Object(a.jsx)("i",{children:"Cilantro v0"})," \xb7 Made with ",t]})]})}function M(e){var t=[];for(var c in e.index)t.push(c);var s=t.map((function(e,c){var s="/tags/"+e;return Object(a.jsxs)("span",{children:[Object(a.jsx)(m.b,{to:s,children:e}),c+1!==t.length?",":""]},c)}));return Object(a.jsxs)("div",{children:[Object(a.jsx)("h1",{children:"Tags"}),s]})}function D(e){var t=Object(O.f)().tag,c={title:t,body:"",recipes:e.index[t]};return Object(a.jsx)(N,Object(j.a)({},c))}function J(e,t){var c=u()(t);console.log(c);var a=c.data.title,s=c.data.tags.split(",").map((function(e){return e.trim()})),n=c.data.image,i=c.data.directions,r=c.data.ingredients.map((function(e){return{amount:"",item:e}})),j=c.data.yield,l=c.data.time;return{id:e,title:a,tags:s,imgUrl:n,steps:i,serves:j,sourceURL:c.data.source,time:l,ingredients:r,bodyText:c.content}}function P(){var e=Object(s.useState)(),t=Object(b.a)(e,2),c=t[0],n=t[1],i=Object(s.useState)({}),r=Object(b.a)(i,2),l=r[0],h=r[1],x=Object(s.useState)({dataRootURL:"/cilantro/recipes/",indexFile:"README.md?raw=true",theme:"light",sidebarCompact:!0}),v=Object(b.a)(x,2),g=v[0],C=v[1];if(Object(s.useEffect)((function(){function e(){return(e=Object(o.a)(d.a.mark((function e(){var t,c,a,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(g.dataRootURL+g.indexFile);case 2:return t=e.sent,e.next=5,t.text();case 5:c=e.sent,a=u()(c),s=a.data.recipes.map(function(){var e=Object(o.a)(d.a.mark((function e(t,c){var a,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(g.dataRootURL+"recipes/"+t+".md?raw=true");case 2:return a=e.sent,e.next=5,a.text();case 5:return s=e.sent,e.abrupt("return",J(c,s));case 7:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}()),Promise.all(s).then((function(e){var t={title:a.data.title,body:a.content,recipes:e};n(t)}));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[g]),Object(s.useEffect)((function(){if(c){var e=function(e){var t,c={},a=Object(p.a)(e);try{for(a.s();!(t=a.n()).done;){var s,n=t.value,i=Object(p.a)(n.tags);try{for(i.s();!(s=i.n()).done;){var r=s.value;r in c||(c[r]=[]),c[r].push(n)}}catch(j){i.e(j)}finally{i.f()}}}catch(j){a.e(j)}finally{a.f()}return c}(c.recipes);h(e)}}),[c]),""===g.dataRootURL)return Object(a.jsx)("div",{});if(""===g.indexFile)return Object(a.jsx)("div",{});if(void 0===c)return Object(a.jsx)("div",{children:"Loading..."});return Object(a.jsx)(y.Provider,{value:g,children:Object(a.jsx)(m.a,{basename:"/cilantro",children:Object(a.jsxs)("div",{className:"app app-theme-"+g.theme,children:[Object(a.jsx)(I,{}),Object(a.jsx)("main",{className:"app-content",children:Object(a.jsxs)(O.c,{children:[Object(a.jsx)(O.a,{path:"/r/:id",children:Object(a.jsx)(f,{recipes:c.recipes})}),Object(a.jsx)(O.a,{path:"/tags/:tag",children:Object(a.jsx)(D,{index:l})}),Object(a.jsx)(O.a,{path:"/tags/",children:Object(a.jsx)(M,{index:l})}),Object(a.jsx)(O.a,{path:"/search/",children:Object(a.jsx)(S,{recipes:c.recipes})}),Object(a.jsx)(O.a,{path:"/settings/",children:Object(a.jsx)(k,{onUpdate:function(e){console.log(e),C(Object(j.a)(Object(j.a)({},g),{},{theme:e}))},updateCompact:function(e){C(Object(j.a)(Object(j.a)({},g),{},{sidebarCompact:e}))}})}),Object(a.jsx)(O.a,{path:"/",children:Object(a.jsx)(N,Object(j.a)({},c))})]})})]})})})}r.a.render(Object(a.jsx)(n.a.StrictMode,{children:Object(a.jsx)(P,{})}),document.getElementById("root"))}},[[89,1,2]]]);
//# sourceMappingURL=main.4534f009.chunk.js.map