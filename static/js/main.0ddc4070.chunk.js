(this.webpackJsonpcilantro=this.webpackJsonpcilantro||[]).push([[0],{21:function(e,t,c){},52:function(e,t){},89:function(e,t,c){"use strict";c.r(t);var s=c(0),a=c(1),n=c.n(a),i=c(43),r=c.n(i),j=(c(21),c(4)),l=c(20),d=c.n(l),o=c(30),b=c(11),p=c(31),h=c(32),u=c.n(h),m=c(7),O=c(3);function x(e){var t="/tags/"+e.text;return Object(s.jsx)(m.b,{to:t,children:e.text})}function f(e){var t=Object(O.f)().id,c=Number(t);return Object(s.jsx)(v,Object(j.a)({},e.recipes[c]))}function v(e){var t=e.tags.map((function(t,c){return Object(s.jsxs)("span",{children:[Object(s.jsx)(x,{text:t}),c+1!==e.tags.length?",":""," "]},c)})),c=e.ingredients.map((function(e){return Object(s.jsxs)("li",{className:"ingredient p-ingredient",children:[Object(s.jsx)("span",{className:"ingredient-amount",children:e.amount}),Object(s.jsx)("span",{className:"ingredient-item",children:e.item})]})})),a=e.steps.map((function(e){return Object(s.jsx)("li",{className:"prep-step",children:Object(s.jsx)("p",{className:"prep-step-text",children:e})})}));return Object(s.jsxs)("article",{className:"recipe hRecipe h-recipe",children:[Object(s.jsx)("h1",{className:"recipe-title fn p-name",children:e.title}),Object(s.jsxs)("header",{className:"recipe-meta",children:[e.serves&&Object(s.jsxs)("span",{className:"recipe-serves yield",children:["Yield ",e.serves]}),e.time&&Object(s.jsxs)("span",{className:"recipe-time",children:["Time ",e.time]}),e.sourceURL&&Object(s.jsx)("a",{href:e.sourceURL,className:"recipe-source",children:"Source"})]}),Object(s.jsxs)("div",{className:"recipe-info",children:[Object(s.jsx)("p",{className:"recipe-description p-summary summary",children:e.bodyText}),Object(s.jsx)("img",{className:"recipe-picture u-photo photo",src:e.imgUrl,alt:e.title})]}),Object(s.jsx)("div",{className:"recipe-tags",children:t}),Object(s.jsxs)("div",{className:"recipe-body",children:[Object(s.jsxs)("div",{className:"recipe-ingredients",children:[Object(s.jsx)("h2",{children:"Ingredients"}),Object(s.jsx)("ul",{className:"ingredients-list",children:c})]}),Object(s.jsxs)("div",{className:"recipe-steps",children:[Object(s.jsx)("h2",{children:"Preparation"}),Object(s.jsx)("ol",{className:"prep-steps instructions e-instructions",children:a})]})]}),Object(s.jsx)(g,{recipe:e})]})}function g(e){var t={"@context":"https://schema.org","@type":"Recipe",cookTime:e.recipe.time,description:e.recipe.bodyText,image:e.recipe.imgUrl,recipeIngredient:e.recipe.ingredients,name:e.recipe.title,recipeInstructions:e.recipe.steps.join(". "),recipeYield:e.recipe.serves};return Object(s.jsx)("script",{type:"application/ld+json",children:JSON.stringify(t)})}function N(e){var t=e.recipes.map((function(e){var t="/r/"+e.id;return Object(s.jsx)("div",{className:"collection-tile",children:Object(s.jsx)(m.b,{to:t,children:e.title})})}));return Object(s.jsxs)("div",{className:"collection-holder",children:[Object(s.jsx)("h1",{className:"collection-title",children:e.title}),Object(s.jsx)("pre",{className:"collection-description",children:e.body}),Object(s.jsx)("div",{className:"collection",children:t})]})}var y=n.a.createContext({dataRootURL:"http://localhost:3000/recipes/",indexFile:"README.md",theme:"light",sidebarCompact:!1});function k(e){var t=Object(a.useContext)(y),c=Object(a.useState)(t.theme),n=Object(b.a)(c,2),i=n[0],r=n[1],j=Object(a.useState)(t.sidebarCompact),l=Object(b.a)(j,2),d=l[0],o=l[1];return Object(a.useEffect)((function(){t.theme!==i&&e.onUpdate(i)}),[i,e,t]),Object(a.useEffect)((function(){t.sidebarCompact!==d&&e.updateCompact(d)}),[d,e,t]),Object(s.jsxs)("div",{children:[Object(s.jsx)("h1",{children:"Settings"}),Object(s.jsx)("h2",{children:"Theme"}),Object(s.jsxs)("form",{children:[Object(s.jsx)("div",{className:"theme-radio",children:Object(s.jsxs)("label",{children:[Object(s.jsx)("input",{type:"radio",name:"theme",value:"light",checked:"light"===i,onChange:function(){return r("light")},className:"theme-radio-input"}),"Light"]})}),Object(s.jsx)("div",{className:"theme-radio",children:Object(s.jsxs)("label",{children:[Object(s.jsx)("input",{type:"radio",name:"theme",value:"blue",checked:"blue"===i,onChange:function(){return r("blue")},className:"theme-radio-input"}),"Blue"]})}),Object(s.jsx)("div",{className:"theme-radio",children:Object(s.jsxs)("label",{children:[Object(s.jsx)("input",{type:"radio",name:"theme",value:"green",checked:"green"===i,onChange:function(){return r("green")},className:"theme-radio-input"}),"Green"]})}),Object(s.jsx)("div",{className:"theme-radio",children:Object(s.jsxs)("label",{children:[Object(s.jsx)("input",{type:"radio",name:"theme",value:"red",checked:"red"===i,onChange:function(){return r("red")},className:"theme-radio-input"}),"Red"]})}),Object(s.jsx)("div",{className:"theme-radio",children:Object(s.jsxs)("label",{children:[Object(s.jsx)("input",{type:"radio",name:"theme",value:"dark",checked:"dark"===i,onChange:function(){return r("dark")},className:"theme-radio-input"}),"Dark"]})})]}),Object(s.jsx)("h2",{children:"Compact Sidebar"}),Object(s.jsxs)("label",{children:[Object(s.jsx)("input",{type:"checkbox",checked:d,onChange:function(){return o(!d)}})," Compact sidebar"]})]})}var C=c(45),R={includeScore:!0,keys:[{name:"title",weight:.25},{name:"tags",weight:.35},{name:"ingredients",weight:.35},{name:"steps",weight:.05}]};function S(e){var t=Object(a.useState)(""),c=Object(b.a)(t,2),n=c[0],i=c[1],r=Object(a.useState)(e.recipes),l=Object(b.a)(r,2),d=l[0],o=l[1];Object(a.useEffect)((function(){var t=new C.a(e.recipes,R).search(n).map((function(e){return e.item}));o(t)}),[e,n]);var p={title:"Results",body:"",recipes:d};return Object(s.jsxs)("div",{children:[Object(s.jsx)("h1",{children:"Search"}),Object(s.jsx)("input",{type:"text",value:n,onChange:function(e){return i(e.target.value)}}),Object(s.jsx)(N,Object(j.a)({},p))]})}var w=c(91),U=c(92),E=c(93),L=c(94),T=c(25),F=c.n(T);function I(){var e=Object(a.useContext)(y),t=function(e){var t;switch(e.theme){case"red":t="\ud83c\udf4e";break;case"blue":t="\ud83e\uded0";break;case"green":t="\ud83c\udf48";break;case"dark":t="\ud83c\udf47";break;default:t="\ud83c\udf3f"}return t}(e),c=F()({"app-sidebar":!e.sidebarCompact,"app-sidebar-c":e.sidebarCompact}),n=F()({hidden:e.sidebarCompact});return Object(s.jsxs)("nav",{className:c,children:[Object(s.jsxs)("section",{className:"app-sidebar-body",children:[Object(s.jsxs)(m.b,{className:"app-sidebar-link",to:"/",children:[Object(s.jsx)(w.a,{})," ",Object(s.jsx)("span",{className:n,children:"Home"})]}),Object(s.jsxs)(m.b,{className:"app-sidebar-link",to:"/tags",children:[Object(s.jsx)(U.a,{})," ",Object(s.jsx)("span",{className:n,children:"Tags"})]}),Object(s.jsxs)(m.b,{className:"app-sidebar-link",to:"/search",children:[Object(s.jsx)(E.a,{})," ",Object(s.jsx)("span",{className:n,children:"Search"})]}),Object(s.jsxs)(m.b,{className:"app-sidebar-link",to:"/settings/",children:[Object(s.jsx)(L.a,{})," ",Object(s.jsx)("span",{className:n,children:"Settings"})]})]}),Object(s.jsxs)("footer",{className:F()("app-sidebar-footer",{hidden:e.sidebarCompact}),children:[Object(s.jsx)("i",{children:"Cilantro v0"})," \xb7 Made with ",t]})]})}function M(e){var t=[];for(var c in e.index)t.push(c);var a=t.map((function(e,c){var a="/tags/"+e;return Object(s.jsxs)("span",{children:[Object(s.jsx)(m.b,{to:a,children:e}),c+1!==t.length?",":""]},c)}));return Object(s.jsxs)("div",{children:[Object(s.jsx)("h1",{children:"Tags"}),a]})}function D(e){var t=Object(O.f)().tag,c={title:t,body:"",recipes:e.index[t]};return Object(s.jsx)(N,Object(j.a)({},c))}function J(e,t){var c=u()(t);console.log(c);var s=c.data.title,a=c.data.tags.split(",").map((function(e){return e.trim()})),n=c.data.image,i=c.data.directions,r=c.data.ingredients.map((function(e){return{amount:"",item:e}})),j=c.data.yield,l=c.data.time;return{id:e,title:s,tags:a,imgUrl:n,steps:i,serves:j,sourceURL:c.data.source,time:l,ingredients:r,bodyText:c.content}}var P=window.location.host;function A(){var e=Object(a.useState)(),t=Object(b.a)(e,2),c=t[0],n=t[1],i=Object(a.useState)({}),r=Object(b.a)(i,2),l=r[0],h=r[1],x=Object(a.useState)({dataRootURL:"http://localhost:3000/recipes/",indexFile:"README.md",theme:"light",sidebarCompact:!0}),v=Object(b.a)(x,2),g=v[0],C=v[1];if(console.log(P),Object(a.useEffect)((function(){function e(){return(e=Object(o.a)(d.a.mark((function e(){var t,c,s,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(g.dataRootURL+g.indexFile);case 2:return t=e.sent,e.next=5,t.text();case 5:c=e.sent,s=u()(c),a=s.data.recipes.map(function(){var e=Object(o.a)(d.a.mark((function e(t,c){var s,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(g.dataRootURL+"recipes/"+t+".md");case 2:return s=e.sent,e.next=5,s.text();case 5:return a=e.sent,e.abrupt("return",J(c,a));case 7:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}()),Promise.all(a).then((function(e){var t={title:s.data.title,body:s.content,recipes:e};n(t)}));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(a.useEffect)((function(){if(c){var e=function(e){var t,c={},s=Object(p.a)(e);try{for(s.s();!(t=s.n()).done;){var a,n=t.value,i=Object(p.a)(n.tags);try{for(i.s();!(a=i.n()).done;){var r=a.value;r in c||(c[r]=[]),c[r].push(n)}}catch(j){i.e(j)}finally{i.f()}}}catch(j){s.e(j)}finally{s.f()}return c}(c.recipes);h(e)}}),[c]),""===g.dataRootURL)return Object(s.jsx)("div",{});if(""===g.indexFile)return Object(s.jsx)("div",{});if(void 0===c)return Object(s.jsx)("div",{children:"Loading..."});return Object(s.jsx)(y.Provider,{value:g,children:Object(s.jsx)(m.a,{children:Object(s.jsxs)("div",{className:"app app-theme-"+g.theme,children:[Object(s.jsx)(I,{}),Object(s.jsx)("main",{className:"app-content",children:Object(s.jsxs)(O.c,{children:[Object(s.jsx)(O.a,{path:"/r/:id",children:Object(s.jsx)(f,{recipes:c.recipes})}),Object(s.jsx)(O.a,{path:"/tags/:tag",children:Object(s.jsx)(D,{index:l})}),Object(s.jsx)(O.a,{path:"/tags/",children:Object(s.jsx)(M,{index:l})}),Object(s.jsx)(O.a,{path:"/search/",children:Object(s.jsx)(S,{recipes:c.recipes})}),Object(s.jsx)(O.a,{path:"/settings/",children:Object(s.jsx)(k,{onUpdate:function(e){console.log(e),C(Object(j.a)(Object(j.a)({},g),{},{theme:e}))},updateCompact:function(e){C(Object(j.a)(Object(j.a)({},g),{},{sidebarCompact:e}))}})}),Object(s.jsx)(O.a,{path:"/",children:Object(s.jsx)(N,Object(j.a)({},c))})]})})]})})})}r.a.render(Object(s.jsx)(n.a.StrictMode,{children:Object(s.jsx)(A,{})}),document.getElementById("root"))}},[[89,1,2]]]);
//# sourceMappingURL=main.0ddc4070.chunk.js.map